<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUWAJEEWA LABORATORIES - Reports Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .header {
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #111;
            font-size: 1.2rem;
        }

        .logo-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .company-name {
            color: #007bff;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 0;
        }

        .company-subtitle {
            color: #6c757d;
            font-size: 0.8rem;
            margin: 0;
        }

        .btn-logout {
            background: #dc3545;
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-logout:hover {
            background: #c82333;
            color: white;
        }

        .content-section {
            padding: 2rem 0;
        }

        .main-panel {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .title-bar {
            background: #007bff;
            color: white;
            padding: 1rem 1.5rem;
            margin: -1.5rem -1.5rem 1.5rem;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 1.5rem;
        }

        .nav-tabs .nav-link {
            border: none;
            color: #6c757d;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
        }

        .nav-tabs .nav-link.active {
            color: #007bff;
            background: none;
            border-bottom: 3px solid #007bff;
        }

        .nav-tabs .nav-link:hover {
            border: none;
            color: #007bff;
        }

        .filter-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .form-label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 0.5rem;
        }

        .form-control {
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }

        .form-control:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .btn-primary {
            background: #007bff;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .table {
            margin-bottom: 0;
        }

        .table th {
            background: #343a40;
            color: white;
            border: none;
            font-weight: 500;
        }

        .table td {
            vertical-align: middle;
        }

        .no-data {
            text-align: center;
            color: #6c757d;
            padding: 3rem;
        }


        .report-title {
            color: #495057;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .btn-group .btn {
            margin-left: 0.25rem;
        }

        .btn-group .btn:first-child {
            margin-left: 0;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading-spinner.show {
            display: block;
        }

        .report-summary {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid #dee2e6;
            display: none;
        }

        .report-summary.show {
            display: block;
        }

        .summary-item {
            text-align: center;
            padding: 0.5rem;
        }

        .summary-label {
            display: block;
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .summary-value {
            display: block;
            color: #007bff;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .table-responsive {
            max-height: 500px;
            overflow-y: auto;
        }

        .no-data {
            text-align: center;
            color: #6c757d;
            padding: 3rem;
            font-style: italic;
        }


        /* Enhanced table styles for filtered data */
        .table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .table-info {
            background-color: #d1ecf1 !important;
            font-weight: bold;
        }

        .text-end {
            text-align: right !important;
        }

        .text-center {
            text-align: center !important;
        }

        .no-data i {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
            color: #007bff;
        }

        /* Filter section enhancements */
        .filter-section .btn-primary {
            transition: all 0.3s ease;
        }

        .filter-section .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);
        }

        /* Loading spinner styles */
        .spinner-border {
            width: 2rem;
            height: 2rem;
        }

        /* Summary row styles */
        .table tbody tr.table-info td {
            border-top: 2px solid #007bff;
            font-weight: bold;
            background-color: #e3f2fd;
        }
    </style>
</head>

<body>
    <!-- Navigation will be loaded here by nav.js -->
    <nav id="navigation-placeholder"></nav>

    <!-- Content Section -->
    <section class="content-section">
        <div class="container">
            <div class="main-panel">
                <!-- Title Bar -->
                <div class="title-bar">
                    <h2 class="mb-0">Reports Management</h2>
                    <div class="btn-group">
                        <button class="btn btn-light" id="print-report-btn">
                            <i class="fas fa-print"></i> Print Report
                        </button>
                        <button class="btn btn-success" id="export-csv-btn">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                        <button class="btn btn-info" id="refresh-report-btn">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Navigation Tabs -->
                <ul class="nav nav-tabs" id="reportTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="daily-tab" data-bs-toggle="tab" data-bs-target="#daily"
                            type="button" role="tab">
                            Daily Sales
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="monthly-tab" data-bs-toggle="tab" data-bs-target="#monthly"
                            type="button" role="tab">
                            Monthly Sales
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="center-tab" data-bs-toggle="tab" data-bs-target="#center"
                            type="button" role="tab">
                            Center Wise
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="commission-tab" data-bs-toggle="tab" data-bs-target="#commission"
                            type="button" role="tab">
                            Commission
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="reportTabsContent">
                    <!-- Daily Sales Tab -->
                    <div class="tab-pane fade show active" id="daily" role="tabpanel">

                        <!-- Filter Section -->
                        <div class="filter-section">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">From Date</label>
                                    <input type="date" class="form-control" id="daily-from-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">To Date</label>
                                    <input type="date" class="form-control" id="daily-to-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Center</label>
                                    <select class="form-control" id="daily-center-filter">
                                        <option value="all">All Centers</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">&nbsp;</label>
                                    <div class="d-grid">
                                        <button class="btn btn-primary" id="daily-filter-btn">
                                            <i class="fas fa-filter"></i> Apply Filter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Report Content -->
                        <h3 class="report-title">Daily Sales Report</h3>

                        <!-- Summary Section -->
                        <div class="report-summary" id="daily-summary">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="summary-item">
                                        <span class="summary-label">Total Bills:</span>
                                        <span class="summary-value" id="daily-total-bills">0</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="summary-item">
                                        <span class="summary-label">Total Amount:</span>
                                        <span class="summary-value" id="daily-total-amount">Rs. 0.00</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="summary-item">
                                        <span class="summary-label">Average Bill:</span>
                                        <span class="summary-value" id="daily-avg-bill">Rs. 0.00</span>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="summary-item">
                                        <span class="summary-label">Date Range:</span>
                                        <span class="summary-value" id="daily-date-range">Today</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>BILL NO</th>
                                        <th>DATE</th>
                                        <th>PATIENT NAME</th>
                                        <th>TESTS</th>
                                        <th>CENTER</th>
                                        <th>REFERENCE</th>
                                        <th>AMOUNT</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="7" class="no-data">No data found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Monthly Sales Tab -->
                    <div class="tab-pane fade" id="monthly" role="tabpanel">

                        <!-- Filter Section -->
                        <div class="filter-section">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">Year</label>
                                    <select class="form-control" id="monthly-year-filter">
                                        <option value="2025">2025</option>
                                        <option value="2026">2026</option>
                                        <option value="2027">2027</option>
                                        <option value="2028">2028</option>
                                        <option value="2029">2029</option>
                                        <option value="2030">2030</option>
                                        <option value="2031">2031</option>
                                        <option value="2032">2032</option>
                                        <option value="2033">2033</option>
                                        <option value="2034">2034</option>
                                        <option value="2035">2035</option>
                                        <option value="2036">2036</option>
                                        <option value="2037">2037</option>
                                        <option value="2038">2038</option>
                                        <option value="2039">2039</option>
                                        <option value="2040">2040</option>
                                        <option value="2024">2024</option>
                                        <option value="2023">2023</option>
                                        <option value="2022">2022</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Month</label>
                                    <select class="form-control" id="monthly-month-filter">
                                        <option value="all">All Months</option>
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Center</label>
                                    <select class="form-control" id="monthly-center-filter">
                                        <option value="all">All Centers</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">&nbsp;</label>
                                    <div class="d-grid">
                                        <button class="btn btn-primary" id="monthly-filter-btn">
                                            <i class="fas fa-filter"></i> Apply Filter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Report Content -->
                        <h3 class="report-title">Monthly Sales Report</h3>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>MONTH</th>
                                        <th>TOTAL BILLS</th>
                                        <th>TOTAL AMOUNT</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="3" class="no-data">No data found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Center Wise Tab -->
                    <div class="tab-pane fade" id="center" role="tabpanel">

                        <!-- Filter Section -->
                        <div class="filter-section">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">From Date</label>
                                    <input type="date" class="form-control" id="center-from-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">To Date</label>
                                    <input type="date" class="form-control" id="center-to-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Center</label>
                                    <select class="form-control" id="center-center-filter">
                                        <option value="all">All Centers</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">&nbsp;</label>
                                    <div class="d-grid">
                                        <button class="btn btn-primary" id="center-filter-btn">
                                            <i class="fas fa-filter"></i> Apply Filter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Report Content -->
                        <h3 class="report-title">Center Wise Report</h3>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>CENTER NAME</th>
                                        <th>TOTAL BILLS</th>
                                        <th>TOTAL AMOUNT</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="3" class="no-data">No data found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Commission Tab -->
                    <div class="tab-pane fade" id="commission" role="tabpanel">

                        <!-- Filter Section -->
                        <div class="filter-section">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">From Date</label>
                                    <input type="date" class="form-control" id="commission-from-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">To Date</label>
                                    <input type="date" class="form-control" id="commission-to-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Reference</label>
                                    <select class="form-control" id="commission-reference-filter">
                                        <option value="all">All References</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">&nbsp;</label>
                                    <div class="d-grid">
                                        <button class="btn btn-primary" id="commission-filter-btn">
                                            <i class="fas fa-filter"></i> Apply Filter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Report Content -->
                        <h3 class="report-title">Commission Report</h3>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>DATE</th>
                                        <th>BILL NO</th>
                                        <th>PATIENT NAME</th>
                                        <th>TESTS</th>
                                        <th>REFERENCE NAME</th>
                                        <th>TOTAL AMOUNT</th>
                                        <th>COMMISSION RATE</th>
                                        <th>COMMISSION AMOUNT</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="no-data">No data found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- Load configuration and services -->
    <script src="config/config.js"></script>
    <script src="config/supabase.js"></script>
    <script src="js/services/reportsService.js"></script>
    <script src="js/services/billingService.js"></script>
    <script src="js/services/centerService.js"></script>
    <script src="js/services/referenceService.js"></script>

    <!-- Reports Management Script -->
    <script src="js/controllers/reportsController.js"></script>

    <!-- Navigation Script -->
    <script src="nav-loader.js"></script>
</body>

</html>
